language: cpp
compiler:
  - gcc
  - clang
before_install:
  - sudo add-apt-repository -y ppa:mapnik/boost
  - sudo apt-get update -qq
install:
  - sudo apt-get install -y libboost1.49-dev
  - sudo apt-get install -y libboost-chrono1.49-dev
  - sudo apt-get install -y libboost-date-time1.49-dev
  - sudo apt-get install -y libboost-filesystem1.49-dev
  - sudo apt-get install -y libboost-program-options1.49-dev
  - sudo apt-get install -y libboost-regex1.49-dev
  - sudo apt-get install -y libboost-system1.49-dev
  - sudo apt-get install -y libboost-thread1.49-dev
  - sudo apt-get install -y libssl-dev
  - sudo apt-get install -y libsqlite3-dev
  - sudo apt-get install -y libdb++-dev
script:
  - ./configure && make && sudo make install
  - export LD_LIBRARY_PATH=$LD_LIBRARY_PATH:/usr/local/lib64
  - /usr/local/share/libcoin/bin/blocktree
  - /usr/local/share/libcoin/bin/claims
  - /usr/local/share/libcoin/bin/client
  - /usr/local/share/libcoin/bin/extended_key
  - /usr/local/share/libcoin/bin/jsonance
  - /usr/local/share/libcoin/bin/merkletrie
  - /usr/local/share/libcoin/bin/namecoin
  - /usr/local/share/libcoin/bin/shamir
  - /usr/local/share/libcoin/bin/sqliterate
  - /usr/local/share/libcoin/bin/serialize
before_deploy:
  - mkdir deploy
  - find bin lib | sort | zip -X@ deploy/namecoin-libcoin-travis-$TRAVIS_BRANCH-$TRAVIS_BUILD_NUMBER-$TRAVIS_OS_NAME-64-$CC.zip
deploy:
  provider: s3
  access_key_id:
    secure: "ih7mFPYMBdq/pxuQ2OPddYVnZqWkRAvneVXxL8snO0ajJlT2/l/Q2ri57v9ObUTB3PQQAqEg7dobaTnGpIv7KNEyNozQjSAVkb+oyYPuaOT/CvnAJdUUUXs+2RvkwSM7sY4ApVtTRlA1CeV1moQ9RG2NhDIsEOuHWgUeJf0jCWs="
  secret_access_key:
    secure: "NlO6+i0rM+ug+jobP02ky25H+UGi/eu5LFb+yMy3KcS73fooryjeYEgfVl+vwTlhqDQFmjWxu6X5XYdQ290dMoih1RhdRT7s/74ApTBXwL9JEolUurNQFGAOvkjvUH3MJlewGAu7elLkCcKM7i1zFi8V5mm+HYFHCDONE9WzikQ="
  bucket: libcoin
  endpoint: s.greenqloud.com
  local-dir: deploy
  on:
    repo: namecoin/libcoin
    all_branches: true
